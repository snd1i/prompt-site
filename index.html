<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Prompt Hub</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary: #4361ee;
  --secondary: #3a0ca3;
  --accent: #f72585;
  --light: #f8f9fa;
  --dark: #212529;
  --gray: #6c757d;
  --card-bg: #ffffff;
  --shadow: 0 4px 12px rgba(0,0,0,0.1);
}

[data-theme="dark"] {
  --light: #121212;
  --dark: #f8f9fa;
  --card-bg: #1e1e1e;
  --gray: #adb5bd;
  --shadow: 0 4px 12px rgba(0,0,0,0.3);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  transition: background 0.3s, color 0.3s;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--light);
  color: var(--dark);
  padding: 20px;
  padding-bottom: 120px;
  line-height: 1.6;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

/* HEADER */
.header {
  text-align: center;
  margin-bottom: 30px;
  padding: 20px;
  background: var(--card-bg);
  border-radius: 15px;
  box-shadow: var(--shadow);
}

.header h1 {
  color: var(--primary);
  margin-bottom: 10px;
  font-size: 2.5rem;
}

/* CONTROLS */
.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 30px;
  background: var(--card-bg);
  padding: 20px;
  border-radius: 15px;
  box-shadow: var(--shadow);
}

.search-box {
  flex: 1;
  min-width: 300px;
  position: relative;
}

.search-box input {
  width: 100%;
  padding: 12px 20px 12px 45px;
  border: 2px solid #e0e0e0;
  border-radius: 50px;
  font-size: 16px;
  background: var(--light);
  color: var(--dark);
}

.search-box i {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--gray);
}

.filter-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

.filter-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 50px;
  background: var(--primary);
  color: white;
  cursor: pointer;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-btn:hover {
  background: var(--secondary);
}

.language-selector {
  position: relative;
}

#languageSelect {
  padding: 10px 20px;
  border: 2px solid #e0e0e0;
  border-radius: 50px;
  background: var(--light);
  color: var(--dark);
  font-weight: 600;
  cursor: pointer;
}

/* PROMPT CARDS */
.prompts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 25px;
  margin-bottom: 40px;
}

.prompt-card {
  background: var(--card-bg);
  border-radius: 15px;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: transform 0.3s;
}

.prompt-card:hover {
  transform: translateY(-5px);
}

.card-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.card-content {
  padding: 20px;
}

.prompt-text {
  margin-bottom: 20px;
  position: relative;
  max-height: 100px;
  overflow: hidden;
}

.prompt-text::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 40px;
  background: linear-gradient(transparent, var(--card-bg));
}

.card-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  font-size: 14px;
  color: var(--gray);
}

.likes {
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
}

.likes i {
  color: var(--accent);
}

.likes:hover i {
  transform: scale(1.2);
}

.card-actions {
  display: flex;
  gap: 10px;
}

.action-btn {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  color: white;
}

.copy-btn {
  background: var(--primary);
}

.share-btn {
  background: #17a2b8;
}

.support-btn {
  background: var(--accent);
  text-decoration: none;
}

.action-btn:hover {
  opacity: 0.9;
}

/* FOOTER */
.footer {
  text-align: center;
  margin-top: 50px;
  color: var(--gray);
  font-size: 14px;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  .prompts-grid {
    grid-template-columns: 1fr;
  }
  
  .controls {
    flex-direction: column;
  }
  
  .search-box {
    min-width: 100%;
  }
}

/* HIDDEN TEXTAREA */
.hidden-textarea {
  position: absolute;
  left: -9999px;
}
</style>
</head>
<body>

<div class="container">
  <!-- HEADER -->
  <header class="header">
    <h1><i class="fas fa-robot"></i> AI Prompt Hub</h1>
    <p id="subtitle">Discover and share the best AI prompts</p>
  </header>

  <!-- CONTROLS -->
  <div class="controls">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" id="searchInput" placeholder="Search prompts...">
    </div>
    
    <div class="filter-controls">
      <button class="filter-btn" onclick="filterPrompts('most_liked')">
        <i class="fas fa-fire"></i> <span data-lang="most_liked">Most Liked</span>
      </button>
      <button class="filter-btn" onclick="filterPrompts('newest')">
        <i class="fas fa-clock"></i> <span data-lang="newest">Newest First</span>
      </button>
      <button class="filter-btn" onclick="filterPrompts('oldest')">
        <i class="fas fa-history"></i> <span data-lang="oldest">Oldest First</span>
      </button>
      <button class="filter-btn" onclick="resetFilters()">
        <i class="fas fa-redo"></i> <span data-lang="reset">Reset</span>
      </button>
      
      <div class="language-selector">
        <select id="languageSelect" onchange="changeLanguage(this.value)">
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
          <option value="ku">ğŸ‡®ğŸ‡¶ Ú©ÙˆØ±Ø¯ÛŒ Ø³Û†Ø±Ø§Ù†ÛŒ</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
        </select>
      </div>
    </div>
  </div>

  <!-- PROMPTS GRID -->
  <div id="promptsContainer" class="prompts-grid">
    <!-- Prompts will be loaded here -->
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <p id="footerText">Â© 2024 AI Prompt Hub | Share your creativity with the world</p>
  </div>
</div>

<!-- HIDDEN TEXTAREA FOR COPYING -->
<textarea id="hiddenTextarea" class="hidden-textarea"></textarea>

<!-- A-Ads Banner (Alt Bar) - ORIGINAL KEPT -->
<div style="position: fixed; z-index: 99999; bottom:0; left:0; right:0; text-align:center;">
  <input type="checkbox" id="aadsstickymk4jqjs2" hidden>
  <div style="width:320px;height:50px;margin:auto;">
    <label for="aadsstickymk4jqjs2" style="top: -24px; right: 0; position: absolute;border-radius: 4px; background: rgba(248, 248, 249, 0.70); padding: 4px; cursor:pointer;">
      <svg fill="#000000" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 490 490">
        <polygon points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490 489.292,457.678 277.331,245.004 489.292,32.337 "/>
      </svg>
    </label>
    <iframe data-aa=2423518 src="//ad.a-ads.com/2423518/?size=320x50" style='border:0; padding:0; width:320px; height:50px; overflow:hidden; margin:auto'></iframe>
  </div>
</div>

<script>
// CONFIGURATION
const SHEET_ID = "1a4gxpaMg2gHNP9krJtVtqmDwMsvpY1KD1tqIes6zNNY";
const SHEET_NAME = "Sheet1";
const URL = `https://opensheet.elk.sh/${SHEET_ID}/${SHEET_NAME}`;

// STATE MANAGEMENT
let allPrompts = [];
let filteredPrompts = [];
let currentFilter = 'none';
let currentLanguage = 'en';
let likes = JSON.parse(localStorage.getItem('promptLikes')) || {};

// TRANSLATIONS
const translations = {
  en: {
    title: "AI Prompt Hub",
    subtitle: "Discover and share the best AI prompts",
    search_placeholder: "Search prompts...",
    most_liked: "Most Liked",
    newest: "Newest First",
    oldest: "Oldest First",
    reset: "Reset",
    copy: "Copy",
    share: "Share",
    support: "Support",
    copied: "Prompt copied to clipboard!",
    shared: "Link copied! Share this prompt with friends",
    like: "Like",
    likes: "Likes",
    footer: "Â© 2024 AI Prompt Hub | Share your creativity with the world",
    no_results: "No prompts found. Try a different search."
  },
  tr: {
    title: "AI Prompt Merkezi",
    subtitle: "En iyi AI promptlarÄ±nÄ± keÅŸfedin ve paylaÅŸÄ±n",
    search_placeholder: "Prompt ara...",
    most_liked: "En BeÄŸenilenler",
    newest: "Yeniden Eskiye",
    oldest: "Eskiden Yeniye",
    reset: "SÄ±fÄ±rla",
    copy: "Kopyala",
    share: "PaylaÅŸ",
    support: "Destek",
    copied: "Prompt panoya kopyalandÄ±!",
    shared: "Link kopyalandÄ±! Bu promptu arkadaÅŸlarÄ±nla paylaÅŸ",
    like: "BeÄŸen",
    likes: "BeÄŸeni",
    footer: "Â© 2024 AI Prompt Merkezi | YaratÄ±cÄ±lÄ±ÄŸÄ±nÄ±zÄ± dÃ¼nyayla paylaÅŸÄ±n",
    no_results: "Prompt bulunamadÄ±. FarklÄ± bir arama deneyin."
  },
  ku: {
    title: "Ù‡Û†Ø¨ÛŒ Ù¾Ø±Û†Ù…Ù¾ØªÛŒ AI",
    subtitle: "Ø¨Ø§Ø´ØªØ±ÛŒÙ† Ù¾Ø±Û†Ù…Ù¾ØªÛ•Ú©Ø§Ù†ÛŒ AI Ø¯Û†Ø²ÛŒÙ†Û•ÙˆÛ• Ùˆ Ù‡Ø§ÙˆØ¨Û•Ø´ÛŒ Ø¨Ú©Û•",
    search_placeholder: "Ú¯Û•Ú•Ø§Ù† Ø¨Û• Ù¾Ø±Û†Ù…Ù¾Øª...",
    most_liked: "Ø²Û†Ø±ØªØ±ÛŒÙ† Ù„Ø§ÛŒÚ©",
    newest: "Ù†ÙˆÛØªØ±ÛŒÙ† Ø³Û•Ø±Û•ØªØ§",
    oldest: "Ú©Û†Ù†ØªØ±ÛŒÙ† Ø³Û•Ø±Û•ØªØ§",
    reset: "Ø¯ÙˆÙˆØ¨Ø§Ø±Û•Ú©Ø±Ø¯Ù†Û•ÙˆÛ•",
    copy: "Ú©ÙˆÙ¾ÛŒ Ú©Ø±Ø¯Ù†",
    share: "Ù‡Ø§ÙˆØ¨Û•Ø´ÛŒ Ú©Ø±Ø¯Ù†",
    support: "ÛŒØ§Ø±Ù…Û•ØªÛŒØ¯Ø§Ù†",
    copied: "Ù¾Ø±Û†Ù…Ù¾Øª Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§ÙˆÛ• Ø¨Û† Ú©Ù„ÛŒÙ¾Ø¨Û†Ø±Ø¯!",
    shared: "Ù„ÛŒÙ†Ú© Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§ÙˆÛ•! Ø¦Û•Ù… Ù¾Ø±Û†Ù…Ù¾ØªÛ• Ù‡Ø§ÙˆØ¨Û•Ø´ÛŒ Ø¨Ú©Û• Ù„Û•Ú¯Û•Úµ Ù‡Ø§ÙˆÚ•ÛÚ©Ø§Ù†",
    like: "Ù„Ø§ÛŒÚ©",
    likes: "Ù„Ø§ÛŒÚ©",
    footer: "Â© 2024 Ù‡Û†Ø¨ÛŒ Ù¾Ø±Û†Ù…Ù¾ØªÛŒ AI | Ø¯Ø§Ù‡ÛÙ†Ø§Ù†Û•Ú©Û•Øª Ù‡Ø§ÙˆØ¨Û•Ø´ÛŒ Ø¨Ú©Û• Ù„Û•Ú¯Û•Úµ Ø¬ÛŒÙ‡Ø§Ù†",
    no_results: "Ù‡ÛŒÚ† Ù¾Ø±Û†Ù…Ù¾ØªÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•. Ú¯Û•Ú•Ø§Ù†ÛÚ©ÛŒ Ø¬ÛŒØ§ÙˆØ§Ø² ØªØ§Ù‚ÛŒ Ø¨Ú©Û•ÙˆÛ•."
  },
  ar: {
    title: "Ù…Ø±ÙƒØ² Ø¨Ø±ÙˆÙ…Ø¨Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
    subtitle: "Ø§ÙƒØªØ´Ù ÙˆØ´Ø§Ø±Ùƒ Ø£ÙØ¶Ù„ Ø¨Ø±ÙˆÙ…Ø¨ØªØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
    search_placeholder: "Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨ØªØ§Øª...",
    most_liked: "Ø§Ù„Ø£ÙƒØ«Ø± Ø¥Ø¹Ø¬Ø§Ø¨Ø§Ù‹",
    newest: "Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹",
    oldest: "Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹",
    reset: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",
    copy: "Ù†Ø³Ø®",
    share: "Ù…Ø´Ø§Ø±ÙƒØ©",
    support: "Ø§Ù„Ø¯Ø¹Ù…",
    copied: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!",
    shared: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡",
    like: "Ø¥Ø¹Ø¬Ø§Ø¨",
    likes: "Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª",
    footer: "Â© 2024 Ù…Ø±ÙƒØ² Ø¨Ø±ÙˆÙ…Ø¨Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ | Ø´Ø§Ø±Ùƒ Ø¥Ø¨Ø¯Ø§Ø¹Ùƒ Ù…Ø¹ Ø§Ù„Ø¹Ø§Ù„Ù…",
    no_results: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨Ø±ÙˆÙ…Ø¨ØªØ§Øª. Ø¬Ø±Ø¨ Ø¨Ø­Ø«Ø§Ù‹ Ù…Ø®ØªÙ„ÙØ§Ù‹."
  },
  ru: {
    title: "Ğ¥Ğ°Ğ± AI ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ²",
    subtitle: "ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¸ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¼Ğ¸ AI Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°Ğ¼Ğ¸",
    search_placeholder: "ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ²...",
    most_liked: "Ğ¡Ğ°Ğ¼Ñ‹Ğµ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ",
    newest: "Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ½Ğ¾Ğ²Ñ‹Ğµ",
    oldest: "Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑÑ‚Ğ°Ñ€Ñ‹Ğµ",
    reset: "Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ",
    copy: "ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
    share: "ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ",
    support: "ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°",
    copied: "ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ² Ğ±ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°!",
    shared: "Ğ¡ÑÑ‹Ğ»ĞºĞ° ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°! ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ ÑÑ‚Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸",
    like: "ĞÑ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ",
    likes: "Ğ›Ğ°Ğ¹ĞºĞ¾Ğ²",
    footer: "Â© 2024 Ğ¥Ğ°Ğ± AI ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² | ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ĞµÑÑŒ ÑĞ²Ğ¾Ğ¸Ğ¼ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ¼ Ñ Ğ¼Ğ¸Ñ€Ğ¾Ğ¼",
    no_results: "ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº."
  }
};

// DETECT USER LANGUAGE
function detectUserLanguage() {
  const userLang = navigator.language || navigator.userLanguage;
  const langCode = userLang.split('-')[0];
  
  if (translations[langCode]) {
    return langCode;
  }
  return 'en'; // Default to English
}

// CHANGE LANGUAGE
function changeLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('preferredLanguage', lang);
  updatePageText();
  renderPrompts();
}

// UPDATE ALL TEXT ON PAGE
function updatePageText() {
  const t = translations[currentLanguage];
  
  document.title = t.title;
  document.querySelector('h1').innerHTML = `<i class="fas fa-robot"></i> ${t.title}`;
  document.getElementById('subtitle').textContent = t.subtitle;
  document.getElementById('searchInput').placeholder = t.search_placeholder;
  document.getElementById('footerText').textContent = t.footer;
  
  // Update button texts
  document.querySelectorAll('[data-lang]').forEach(el => {
    const key = el.getAttribute('data-lang');
    if (t[key]) {
      el.textContent = t[key];
    }
  });
}

// FETCH PROMPTS FROM GOOGLE SHEETS
async function fetchPrompts() {
  try {
    const response = await fetch(URL);
    const data = await response.json();
    
    // Add likes data to each prompt
    allPrompts = data.map((item, index) => {
      const promptId = item.prompt ? item.prompt.substring(0, 50).replace(/\s/g, '_') + '_' + index : 'prompt_' + index;
      return {
        ...item,
        id: promptId,
        likes: likes[promptId] || 0,
        dateAdded: item.date || new Date().toISOString()
      };
    });
    
    // Set initial language
    const savedLang = localStorage.getItem('preferredLanguage') || detectUserLanguage();
    document.getElementById('languageSelect').value = savedLang;
    changeLanguage(savedLang);
    
    // Initial render
    filteredPrompts = [...allPrompts];
    renderPrompts();
    setupSearch();
    
  } catch (error) {
    console.error("Error fetching prompts:", error);
    document.getElementById('promptsContainer').innerHTML = 
      `<div style="text-align:center; padding:50px; color:var(--gray)">
        <i class="fas fa-exclamation-triangle fa-3x" style="margin-bottom:20px;"></i>
        <h3>Error loading prompts</h3>
        <p>Please check your internet connection</p>
      </div>`;
  }
}

// RENDER PROMPTS
function renderPrompts() {
  const container = document.getElementById('promptsContainer');
  const t = translations[currentLanguage];
  
  if (filteredPrompts.length === 0) {
    container.innerHTML = `
      <div style="grid-column:1/-1; text-align:center; padding:50px; color:var(--gray)">
        <i class="fas fa-search fa-3x" style="margin-bottom:20px;"></i>
        <h3>${t.no_results}</h3>
      </div>`;
    return;
  }
  
  container.innerHTML = filteredPrompts.map((prompt, index) => {
    const promptId = prompt.id;
    const isLiked = localStorage.getItem(`liked_${promptId}`) === 'true';
    
    // Create shareable link
    const shareLink = `${window.location.origin}${window.location.pathname}?prompt=${encodeURIComponent(promptId)}`;
    
    return `
      <div class="prompt-card" data-id="${promptId}">
        <img src="${prompt.image || 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=400&h=200&fit=crop'}" 
             class="card-image" 
             alt="Prompt preview">
        
        <div class="card-content">
          <div class="prompt-text">
            ${prompt.prompt || 'No prompt text available'}
          </div>
          
          <div class="card-meta">
            <div class="likes" onclick="toggleLike('${promptId}')">
              <i class="fas fa-heart ${isLiked ? 'liked' : ''}"></i>
              <span>${prompt.likes} ${t.likes}</span>
            </div>
            <div>${new Date(prompt.dateAdded).toLocaleDateString()}</div>
          </div>
          
          <div class="card-actions">
            <button class="action-btn copy-btn" onclick="copyPrompt('${promptId}')">
              <i class="fas fa-copy"></i> ${t.copy}
            </button>
            <button class="action-btn share-btn" onclick="sharePrompt('${promptId}')">
              <i class="fas fa-share-alt"></i> ${t.share}
            </button>
            <a class="action-btn support-btn" href="https://t.me/k4miran_sndi" target="_blank">
              <i class="fas fa-hands-helping"></i> ${t.support}
            </a>
          </div>
        </div>
        
        <!-- Hidden prompt text for copying -->
        <div class="hidden-prompt" style="display:none">${prompt.prompt || ''}</div>
      </div>
    `;
  }).join('');
}

// COPY PROMPT
function copyPrompt(promptId) {
  const prompt = allPrompts.find(p => p.id === promptId);
  if (!prompt) return;
  
  navigator.clipboard.writeText(prompt.prompt || '')
    .then(() => {
      alert(translations[currentLanguage].copied);
    })
    .catch(err => {
      console.error('Copy failed:', err);
      // Fallback method
      const textarea = document.getElementById('hiddenTextarea');
      textarea.value = prompt.prompt || '';
      textarea.select();
      document.execCommand('copy');
      alert(translations[currentLanguage].copied);
    });
}

// SHARE PROMPT WITH LINK
function sharePrompt(promptId) {
  const shareLink = `${window.location.origin}${window.location.pathname}?prompt=${encodeURIComponent(promptId)}`;
  
  navigator.clipboard.writeText(shareLink)
    .then(() => {
      alert(translations[currentLanguage].shared);
    })
    .catch(err => {
      console.error('Share failed:', err);
      // Fallback method
      const textarea = document.getElementById('hiddenTextarea');
      textarea.value = shareLink;
      textarea.select();
      document.execCommand('copy');
      alert(translations[currentLanguage].shared);
    });
}

// TOGGLE LIKE
function toggleLike(promptId) {
  const prompt = allPrompts.find(p => p.id === promptId);
  if (!prompt) return;
  
  const isLiked = localStorage.getItem(`liked_${promptId}`) === 'true';
  
  if (isLiked) {
    prompt.likes--;
    localStorage.setItem(`liked_${promptId}`, 'false');
  } else {
    prompt.likes++;
    localStorage.setItem(`liked_${promptId}`, 'true');
  }
  
  // Update likes in localStorage
  likes[promptId] = prompt.likes;
  localStorage.setItem('promptLikes', JSON.stringify(likes));
  
  // Re-render prompts
  renderPrompts();
  
  // Re-apply current filter if needed
  if (currentFilter === 'most_liked') {
    filterPrompts('most_liked');
  }
}

// FILTER PROMPTS
function filterPrompts(filterType) {
  currentFilter = filterType;
  
  switch(filterType) {
    case 'most_liked':
      filteredPrompts = [...allPrompts].sort((a, b) => b.likes - a.likes);
      break;
    case 'newest':
      filteredPrompts = [...allPrompts].sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
      break;
    case 'oldest':
      filteredPrompts = [...allPrompts].sort((a, b) => new Date(a.dateAdded) - new Date(b.dateAdded));
      break;
    default:
      filteredPrompts = [...allPrompts];
  }
  
  renderPrompts();
}

// RESET FILTERS
function resetFilters() {
  currentFilter = 'none';
  filteredPrompts = [...allPrompts];
  document.getElementById('searchInput').value = '';
  renderPrompts();
}

// SETUP SEARCH FUNCTIONALITY
function setupSearch() {
  const searchInput = document.getElementById('searchInput');
  
  searchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    
    if (!searchTerm.trim()) {
      filteredPrompts = [...allPrompts];
      if (currentFilter !== 'none') {
        filterPrompts(currentFilter);
      }
    } else {
      filteredPrompts = allPrompts.filter(prompt => 
        prompt.prompt.toLowerCase().includes(searchTerm) ||
        (prompt.tags && prompt.tags.toLowerCase().includes(searchTerm))
      );
    }
    
    renderPrompts();
  });
}

// CHECK URL FOR PROMPT PARAMETER
function checkUrlForPrompt() {
  const urlParams = new URLSearchParams(window.location.search);
  const promptId = urlParams.get('prompt');
  
  if (promptId) {
    // Scroll to the specific prompt
    setTimeout(() => {
      const promptElement = document.querySelector(`[data-id="${promptId}"]`);
      if (promptElement) {
        promptElement.scrollIntoView({ behavior: 'smooth' });
        promptElement.style.boxShadow = '0 0 0 3px var(--accent)';
        setTimeout(() => {
          promptElement.style.boxShadow = 'var(--shadow)';
        }, 3000);
      }
    }, 1000);
  }
}

// INITIALIZE
document.addEventListener('DOMContentLoaded', () => {
  fetchPrompts();
  
  // Check for prompt in URL after a delay
  setTimeout(checkUrlForPrompt, 1500);
});
</script>

</body>
      </html>
